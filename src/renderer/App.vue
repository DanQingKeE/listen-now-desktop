<template>
  <div id="app" width="1280px" height="720px">
    <div class="img-Background" :style="{backgroundImage: 'url(' + bg + ')' }"></div>
    <div id="leftPart">
        <sideBar></sideBar>
    </div>
    <div id="rightPart">
        <router-view></router-view>
    </div>
  </div>
</template>

<script>
  import apiTool from './renderUtil/api';
  import tokenUtil from './renderUtil/token';
  import errMesage from './renderUtil/errorMessage';
  import sideBar from './components/common/sideBar/sideBar';
  import Background from './assets/DEMO-2.jpg';
  import $ from 'jquery';

  export default {
    name: 'listen-now-desktop',
    components:{
        sideBar
    },
    data() {
            return { bg: Background, musicList: [
                    {
                        artists:"周传雄",
                        image_url:"http://p1.music.126.net/Y91B_GXc5d9t-0X0Uu_7xw==/109951163063096750.jpg",
                        lyric:"[00:00.00] 作曲 : 周传雄↵[00:01.00] 作词 : 陈信荣↵[00:27.147]过完整个夏天↵[00:34.400]忧伤并没有好一些↵[00:40.189]开车行驶在公路无际无边↵[00:46.990]有离开自己的感觉↵[00:50.890]↵[00:54.290]唱不完一首歌↵[00:58.318]疲倦还剩下黑眼圈↵[01:04.308]感情的世界伤害在所难免↵[01:10.388]黄昏再美终要黑夜↵[01:15.598]依然记得从你口中说出再见坚决如铁↵[01:22.400]昏暗中有种烈日灼身的错觉↵[01:29.790]黄昏的地平线↵[01:31.778]划出一句离别↵[01:35.397]爱情进入永夜↵[01:39.778]↵[01:43.080]依然记得从你眼中滑落的泪伤心欲绝↵[01:48.088]混乱中有种热泪烧伤的错觉↵[01:53.588]黄昏的地平线↵[01:56.358]割断幸福喜悦↵[01:59.368]相爱已经幻灭↵[02:11.088]↵[02:19.377]唱不完一首歌↵[02:24.577]疲倦还剩下黑眼圈↵[02:30.890]感情的世界伤害在所难免↵[02:36.735]黄昏再美终要黑夜↵[02:41.556]↵[02:43.956]依然记得从你口中说出再见坚决如铁↵[02:50.145]昏暗中有种烈日灼身的错觉↵[02:54.887]黄昏的地平线↵[02:58.026]划出一句离别↵[03:01.289]爱情进入永夜↵[03:07.970]↵[03:08.065]依然记得从你眼中滑落的泪伤心欲绝↵[03:13.669]混乱中有种热泪烧伤的错觉↵[03:19.535]黄昏的地平线↵[03:22.595]割断幸福喜悦↵[03:25.765]相爱已经幻灭↵[03:46.076]↵[03:57.076]依然记得从你口中说出再见坚决如铁↵[04:03.095]昏暗中有种烈日灼身的错觉↵[04:09.377]黄昏的地平线↵[04:12.487]划出一句离别↵[04:14.756]爱情进入永夜↵[04:20.588]↵[04:21.318]依然记得从你眼中滑落的泪伤心欲绝↵[04:28.317]混乱中有种热泪烧伤的错觉↵[04:34.890]黄昏的地平线↵[04:36.597]割断幸福喜悦↵[04:40.789]相爱已经幻灭↵[04:54.789]↵",
                        music_id:190072,
                        music_name:"黄昏",
                        play_url:"http://music.163.com/song/media/outer/url?id=190072.mp3",
                        tlyric:null
                    },
                    {
                        artists:"周传雄",
                        image_url:"http://p1.music.126.net/Y91B_GXc5d9t-0X0Uu_7xw==/109951163063096750.jpg",
                        music_id:189602,
                        music_name:"青花",
                        play_url:"http://music.163.com/song/media/outer/url?id=189602.mp3",
                    },
                    {
                        artists:"周传雄",
                        image_url:"http://p1.music.126.net/Y91B_GXc5d9t-0X0Uu_7xw==/109951163063096750.jpg",
                        lyric:"[00:00.00] 作曲 : 周传雄↵[00:01.00] 作词 : 陈信荣↵[00:27.147]过完整个夏天↵[00:34.400]忧伤并没有好一些↵[00:40.189]开车行驶在公路无际无边↵[00:46.990]有离开自己的感觉↵[00:50.890]↵[00:54.290]唱不完一首歌↵[00:58.318]疲倦还剩下黑眼圈↵[01:04.308]感情的世界伤害在所难免↵[01:10.388]黄昏再美终要黑夜↵[01:15.598]依然记得从你口中说出再见坚决如铁↵[01:22.400]昏暗中有种烈日灼身的错觉↵[01:29.790]黄昏的地平线↵[01:31.778]划出一句离别↵[01:35.397]爱情进入永夜↵[01:39.778]↵[01:43.080]依然记得从你眼中滑落的泪伤心欲绝↵[01:48.088]混乱中有种热泪烧伤的错觉↵[01:53.588]黄昏的地平线↵[01:56.358]割断幸福喜悦↵[01:59.368]相爱已经幻灭↵[02:11.088]↵[02:19.377]唱不完一首歌↵[02:24.577]疲倦还剩下黑眼圈↵[02:30.890]感情的世界伤害在所难免↵[02:36.735]黄昏再美终要黑夜↵[02:41.556]↵[02:43.956]依然记得从你口中说出再见坚决如铁↵[02:50.145]昏暗中有种烈日灼身的错觉↵[02:54.887]黄昏的地平线↵[02:58.026]划出一句离别↵[03:01.289]爱情进入永夜↵[03:07.970]↵[03:08.065]依然记得从你眼中滑落的泪伤心欲绝↵[03:13.669]混乱中有种热泪烧伤的错觉↵[03:19.535]黄昏的地平线↵[03:22.595]割断幸福喜悦↵[03:25.765]相爱已经幻灭↵[03:46.076]↵[03:57.076]依然记得从你口中说出再见坚决如铁↵[04:03.095]昏暗中有种烈日灼身的错觉↵[04:09.377]黄昏的地平线↵[04:12.487]划出一句离别↵[04:14.756]爱情进入永夜↵[04:20.588]↵[04:21.318]依然记得从你眼中滑落的泪伤心欲绝↵[04:28.317]混乱中有种热泪烧伤的错觉↵[04:34.890]黄昏的地平线↵[04:36.597]割断幸福喜悦↵[04:40.789]相爱已经幻灭↵[04:54.789]↵",
                        music_id:190071,
                        music_name:"黄昏",
                        play_url:"http://music.163.com/song/media/outer/url?id=190072.mp3",
                        tlyric:null
                    }
                ]}
    },
    async mounted(){
        let res = await tokenUtil.getToken();
        let {signature, token_message} = res.data;
        token_message = token_message.substring(2, token_message.length - 1);
        apiTool.setAuth(token_message);
        await tokenUtil.getExistToken(1, token_message);
        this.$store.dispatch('setToken', token_message);

        //将token存储至localStroage
        window.localStorage.setItem('token', token_message);
        this.$store.commit('SET_MUSICLIST', this.musicList);
    },
    methods:{
        goToSearch(){
            this.$router.push('./search');
        },
        goHome(){
            this.$router.push('./pages/index');
        }
    }
  };
</script>

<style>
    /* CSS */
    *{
        -webkit-font-smoothing:subpixel-antialiased; /*全局抗锯齿*/
        font-family: Helvetica, Tahoma, Arial, STXihei, "华文细黑", "Microsoft YaHei", "微软雅黑", SimSun, "宋体", Heiti, "黑体", sans-serif;
    }

    #leftPart {
        width: 320px;
        height: 720px;
        margin: 0;
        padding: 50px;
        position:absolute;
        left:0px;
        top:0px;
    }
    #rightPart {
        width: 960px;
        height: 720px;
        margin: 0;
        padding: 50px 0px 50px 0px;
        /* 顺序：上 右 下 左 */
        position:absolute;
        left:320px;
        top:0px;
    }

    .img-Background {
        filter: blur(32px);
        /* 让整个div固定在屏幕的最上方和最左方 */
        position:fixed;
        top: -10%;
        left: -10%;
        /* 让整个div跟屏幕实现一模一样的大小，从而达到全屏效果 */
        width:120%;
        height:120%;
        /* 实现让屏幕宽度在1000px以内时，div的大小保持不变，
        也就是说在这种情况下，缩放屏幕宽度时，图片不要缩放
        （只有在1000px以内才有效）。 */
        min-width: 1000px;
        /* 让整个div在HTML页面中各个层级的下方，
        写-10是为了确保在最底部 */
        z-index:-100;
        zoom: 1;
        background-color: #fff;
        /* 背景不要重复 */
        background-repeat: no-repeat;
        /* 让图片随屏幕大小同步缩放，但是有部分可能会被裁切，不过不至于会露白 */
        background-size: cover;
        -webkit-background-size: cover; /* 兼容chrome */
        -o-background-size: cover; /* 兼容opera */
        /* 图片的位置，居中，靠左对齐 */
        background-position: center 0;
    }
</style>
